!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],t):(e=e||self).ReactInputMask=t(e.React,e.ReactDOM)}(this,(function(e,t){"use strict";var n="default"in e?e.default:e;function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}}(e,t),e})(e,t)}function i(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}function a(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function u(e,t){return e(t={exports:{}},t.exports),t.exports}var s=u((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116;function g(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case f:case i:case u:case a:case p:return e;default:switch(e=e&&e.$$typeof){case l:case d:case s:return e;default:return t}}case m:case h:case o:return t}}}function v(e){return g(e)===f}t.typeOf=g,t.AsyncMode=c,t.ConcurrentMode=f,t.ContextConsumer=l,t.ContextProvider=s,t.Element=r,t.ForwardRef=d,t.Fragment=i,t.Lazy=m,t.Memo=h,t.Portal=o,t.Profiler=u,t.StrictMode=a,t.Suspense=p,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===f||e===u||e===a||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===h||e.$$typeof===s||e.$$typeof===l||e.$$typeof===d)},t.isAsyncMode=function(e){return v(e)||g(e)===c},t.isConcurrentMode=v,t.isContextConsumer=function(e){return g(e)===l},t.isContextProvider=function(e){return g(e)===s},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return g(e)===d},t.isFragment=function(e){return g(e)===i},t.isLazy=function(e){return g(e)===m},t.isMemo=function(e){return g(e)===h},t.isPortal=function(e){return g(e)===o},t.isProfiler=function(e){return g(e)===u},t.isStrictMode=function(e){return g(e)===a},t.isSuspense=function(e){return g(e)===p}}));a(s);s.typeOf,s.AsyncMode,s.ConcurrentMode,s.ContextConsumer,s.ContextProvider,s.Element,s.ForwardRef,s.Fragment,s.Lazy,s.Memo,s.Portal,s.Profiler,s.StrictMode,s.Suspense,s.isValidElementType,s.isAsyncMode,s.isConcurrentMode,s.isContextConsumer,s.isContextProvider,s.isElement,s.isForwardRef,s.isFragment,s.isLazy,s.isMemo,s.isPortal,s.isProfiler,s.isStrictMode,s.isSuspense;var l=u((function(){}));a(l);l.typeOf,l.AsyncMode,l.ConcurrentMode,l.ContextConsumer,l.ContextProvider,l.Element,l.ForwardRef,l.Fragment,l.Lazy,l.Memo,l.Portal,l.Profiler,l.StrictMode,l.Suspense,l.isValidElementType,l.isAsyncMode,l.isConcurrentMode,l.isContextConsumer,l.isContextProvider,l.isElement,l.isForwardRef,l.isFragment,l.isLazy,l.isMemo,l.isPortal,l.isProfiler,l.isStrictMode,l.isSuspense,u((function(e){e.exports=s}));var c=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable;function p(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}})()&&Object.assign,Function.call.bind(Object.prototype.hasOwnProperty);function h(){}function m(){}m.resetWarningCache=h;u((function(e){e.exports=function(){function e(e,t,n,r,o,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:m,resetWarningCache:h};return n.PropTypes=n,n}()}));function g(e){return requestAnimationFrame(e)}function v(e){cancelAnimationFrame(e)}function y(e){if(!e)return!1;var t=e.ownerDocument;return t.hasFocus()&&t.activeElement===e}function b(e){return null==e?void 0:e.ownerDocument}function P(e){var t=function(e){var t;return null==(t=b(e))?void 0:t.defaultView}(e);return!!t&&e instanceof t.HTMLElement}function S(t){return e.useCallback((function(){var e=t.current,n="undefined"!=typeof window&&P(e);if(!e||!n)return null;if("INPUT"!==e.nodeName&&(e=e.querySelector("input")),!e)throw new Error("react-input-mask: inputComponent doesn't contain input node");return e}),[t])}function C(t,n){var r,o,i,a,u=e.useRef({start:null,end:null}),s=S(t),l=e.useCallback((function(){var e=s();if(e)return function(e){var t=e.selectionStart,n=e.selectionEnd;return{start:t,end:n,length:n-t}}(e)}),[s]),c=e.useCallback((function(){return u.current}),[]),f=e.useCallback((function(e){var t=s();t&&y(t)&&(!function(e,t,n){void 0===n&&(n=t),e.setSelectionRange(t,n)}(t,e.start,e.end),u.current=l())}),[s,l]),d=e.useCallback((function(){u.current=l()}),[l]),p=(r=d,o=e.useRef(null),i=e.useCallback((function(){null===o.current&&function e(){r(),o.current=g(e)}()}),[r]),a=e.useCallback((function(){v(o.current),o.current=null}),[]),e.useEffect((function(){o.current&&(a(),i())}),[i,a]),e.useEffect(v,[]),[i,a]),h=p[0],m=p[1];return e.useLayoutEffect((function(){if(n){var e=s();return e&&(e.addEventListener("focus",h),e.addEventListener("blur",m)),y(e)&&h(),function(){e&&(e.removeEventListener("focus",h),e.removeEventListener("blur",m)),m()}}})),{getSelection:l,getLastSelection:c,setSelection:f}}function E(t,n){var r=e.useRef(),o=C(r,n),i=o.getSelection,a=o.getLastSelection,u=o.setSelection,s=function(t,n){var r=S(t),o=e.useRef(n);return{getValue:e.useCallback((function(){var e=r();return e?e.value:void 0}),[r]),getLastValue:e.useCallback((function(){return o.current}),[]),setValue:e.useCallback((function(e){o.current=e;var t=r();t&&(t.value=e)}),[r])}}(r,t),l=s.getValue,c=s.getLastValue,f=s.setValue;return{inputRef:r,getInputState:function(){return{value:l(),selection:i()}},getLastInputState:function(){return{value:c(),selection:a()}},setInputState:function(e){var t=e.value,n=e.selection;f(t),u(n)}}}var k=function(e,t,n,r,o,i,a,u){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,o,i,a,u],c=0;(s=new Error(t.replace(/%s/g,(function(){return l[c++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}},O=["disabled","onBlur","onChange","onFocus","onMouseDown","readOnly","value"],w={"#":/[0-9]/,9:/[0-9]/,a:/[A-Za-z]/,x:/[A-Za-z]/,"*":/[A-Za-z0-9]/};var M=function(e){var t=this;this.isCharacterAllowedAtPosition=function(e,n){var r=t.maskOptions.maskPlaceholder;return!!t.isCharacterFillingPosition(e,n)||!!r&&r[n]===e},this.isCharacterFillingPosition=function(e,n){var r=t.maskOptions.mask;if(!e||n>=r.length)return!1;if(!t.isPositionEditable(n))return r[n]===e;var o=r[n];return new RegExp(o).test(e)},this.isPositionEditable=function(e){var n=t.maskOptions,r=n.mask,o=n.permanents;return e<r.length&&-1===o.indexOf(e)},this.isValueEmpty=function(e){return e.split("").every((function(e,n){return!t.isPositionEditable(n)||!t.isCharacterFillingPosition(e,n)}))},this.isValueFilled=function(e){return t.getFilledLength(e)===t.maskOptions.lastEditablePosition+1},this.getDefaultSelectionForValue=function(e){var n=t.getFilledLength(e),r=t.getRightEditablePosition(n);return{start:r,end:r}},this.getFilledLength=function(e){return function(e,t){for(var n=e.length-1;n>=0;n--){if(t(e[n],n))return n}return-1}(e.split(""),(function(e,n){return t.isPositionEditable(n)&&t.isCharacterFillingPosition(e,n)}))+1},this.getStringFillingLengthAtPosition=function(e,n){return e.split("").reduce((function(e,n){return t.insertCharacterAtPosition(e,n,e.length)}),function(e,t){void 0===t&&(t=1);for(var n="",r=0;r<t;r++)n+=e;return n}(" ",n)).length-n},this.getLeftEditablePosition=function(e){for(var n=e;n>=0;n--)if(t.isPositionEditable(n))return n;return null},this.getRightEditablePosition=function(e){for(var n=t.maskOptions.mask,r=e;r<n.length;r++)if(t.isPositionEditable(r))return r;return null},this.formatValue=function(e){var n=t.maskOptions,r=n.maskPlaceholder,o=n.mask;if(!r){for(e=t.insertStringAtPosition("",e,0);e.length<o.length&&!t.isPositionEditable(e.length);)e+=o[e.length];return e}return t.insertStringAtPosition(r,e,0)},this.clearRange=function(e,n,r){if(!r)return e;var o=n+r,i=t.maskOptions,a=i.maskPlaceholder,u=i.mask,s=e.split("").map((function(e,r){var i=t.isPositionEditable(r);return!a&&r>=o&&!i?"":r<n||r>=o?e:i?a?a[r]:"":u[r]})).join("");return t.formatValue(s)},this.insertCharacterAtPosition=function(e,n,r){var o=t.maskOptions,i=o.mask,a=o.maskPlaceholder;if(r>=i.length)return e;var u=t.isCharacterAllowedAtPosition(n,r),s=t.isPositionEditable(r),l=t.getRightEditablePosition(r),c=a&&l?n===a[l]:null,f=e.slice(0,r);!u&&s||(e=f+(u?n:i[r]));return u||s||c||(e=t.insertCharacterAtPosition(e,n,r+1)),e},this.insertStringAtPosition=function(e,n,r){var o=t.maskOptions,i=o.mask,a=o.maskPlaceholder;if(!n||r>=i.length)return e;var u=n.split(""),s=t.isValueFilled(e)||!!a,l=e.slice(r);if(e=u.reduce((function(e,n){return t.insertCharacterAtPosition(e,n,e.length)}),e.slice(0,r)),s)e+=l.slice(e.length-r);else if(t.isValueFilled(e))e+=i.slice(e.length).join("");else{e=l.split("").filter((function(e,n){return t.isPositionEditable(r+n)})).reduce((function(e,n){var r=t.getRightEditablePosition(e.length);return null===r?e:(t.isPositionEditable(e.length)||(e+=i.slice(e.length,r).join("")),t.insertCharacterAtPosition(e,n,e.length))}),e)}return e},this.processChange=function(e,n){var r=t.maskOptions,o=r.mask,i=r.prefix,a=r.lastEditablePosition,u=e.value,s=e.selection,l=n.value,c=n.selection,f=u,d="",p=0,h=0,m=Math.min(c.start,s.start);if(s.end>c.start?(d=f.slice(c.start,s.end),h=(p=t.getStringFillingLengthAtPosition(d,m))?c.length:0):f.length<l.length&&(h=l.length-f.length),f=l,h){if(1===h&&!c.length)m=c.start===s.start?t.getRightEditablePosition(s.start):t.getLeftEditablePosition(s.start);f=t.clearRange(f,m,h)}return f=t.insertStringAtPosition(f,d,m),(m+=p)>=o.length?m=o.length:m<i.length&&!p?m=i.length:m>=i.length&&m<a&&p&&(m=t.getRightEditablePosition(m)),{value:f=t.formatValue(f),enteredString:d,selection:{start:m,end:m}}},this.maskOptions=function(e){var t=e.formatChars,n=e.mask,o=e.maskPlaceholder,i=[],a=r({},w,t);if(!n)return{maskPlaceholder:null,mask:null,prefix:null,lastEditablePosition:null,permanents:[]};if("string"==typeof n){var u=!1,s="";n.split("").forEach((function(e){u||"\\"!==e?(!u&&a[e]||i.push(s.length),s+=e,u=!1):u=!0})),n=s.split("").map((function(e,t){return-1===i.indexOf(t)?a[e]:e}))}else n.forEach((function(e,t){"string"==typeof e&&i.push(t)}));o&&(o=1===o.length?n.map((function(e,t){return-1!==i.indexOf(t)?e:o})):o.split(""),i.forEach((function(e){o[e]=n[e]})),o=o.join(""));for(var l=i.filter((function(e,t){return e===t})).map((function(e){return n[e]})).join(""),c=n.length-1;-1!==i.indexOf(c);)c--;return{maskPlaceholder:o,prefix:l,mask:n,lastEditablePosition:c,permanents:i}}(e)},F=["children"],j=function(e){var t,r;function a(){return e.apply(this,arguments)||this}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,o(t,r),a.prototype.render=function(){var e=this.props,t=e.children,r=i(e,F);return(n.cloneElement(t,r))},a}(n.Component),x=["alwaysShowMask","beforeMaskedStateChange","children","formatChars","mask","maskPlaceholder"],R=e.forwardRef((function(o,a){var u=o.alwaysShowMask,s=o.beforeMaskedStateChange,l=o.children,c=o.formatChars,f=o.mask,d=o.maskPlaceholder,p=i(o,x);!function(e){var t=e.mask,n=e.maskPlaceholder;t&&n&&1!==n.length&&n.length!==t.length&&k(!1)}(o);var h,m,v=new M({formatChars:c,mask:f,maskPlaceholder:d}),P=!!f,C=!p.disabled&&!p.readOnly,w=null!==o.value&&void 0!==o.value,F=(h=P,m=e.useRef(),e.useEffect((function(){m.current=h})),m.current),R=E(function(e){return""+e}((w?o.value:o.defaultValue)||""),P),V=R.inputRef,L=R.getInputState,A=R.setInputState,T=R.getLastInputState,_=S(V);if(P&&w){var D=_(),$=D&&y(D)||u||o.value?v.formatValue(o.value):o.value;s&&($=s({nextState:{value:$,selection:{start:null,end:null}}}).value),A(r({},T(),{value:$}))}var I=T(),z=I.selection,N=I.value;e.useLayoutEffect((function(){if(P){var e=y(_()),t=z,n=L(),o=r({},n);if(!w){var i=n.value,a=v.formatValue(i),l=v.isValueEmpty(a);!l||e||u?o.value=a:l&&!e&&(o.value="")}e&&!F?o.selection=v.getDefaultSelectionForValue(o.value):w&&e&&t&&null!==t.start&&null!==t.end&&(o.selection=t),s&&(o=s({currentState:n,nextState:o})),A(o)}}));var q=r({},p,{onFocus:function(e){V.current=e.target;var t=L().value;if(P&&!v.isValueFilled(t)){var n=v.formatValue(t),r=v.getDefaultSelectionForValue(n),i={value:n,selection:r};s&&(n=(i=s({currentState:L(),nextState:i})).value,r=i.selection),A(i),n!==t&&o.onChange&&o.onChange(e),g((function(){A(T())}))}o.onFocus&&o.onFocus(e)},onBlur:function(e){var t=L().value,n=T().value;if(P&&!u&&v.isValueEmpty(n)){var r="",i={value:r,selection:{start:null,end:null}};s&&(r=(i=s({currentState:L(),nextState:i})).value),A(i),r!==t&&o.onChange&&o.onChange(e)}o.onBlur&&o.onBlur(e)},onChange:P&&C?function(e){var t=L(),n=T(),r=v.processChange(t,n);s&&(r=s({currentState:t,previousState:n,nextState:r})),A(r),o.onChange&&o.onChange(e)}:o.onChange,onMouseDown:P&&C?function(e){var t=_(),n=L().value,i=b(t);if(i&&!y(t)&&!v.isValueFilled(n)){var a=e.clientX,u=e.clientY,s=(new Date).getTime();i.addEventListener("mouseup",(function e(n){if(i.removeEventListener("mouseup",e),y(t)){var o=Math.abs(n.clientX-a),l=Math.abs(n.clientY-u),c=Math.max(o,l),f=(new Date).getTime()-s;if(c<=10&&f<=200||c<=5&&f<=300){var d=T(),p=r({},d,{selection:v.getDefaultSelectionForValue(d.value)});A(p)}}}))}o.onMouseDown&&o.onMouseDown(e)}:o.onMouseDown,ref:function(e){V.current=t.findDOMNode(e),!function(e){return"function"==typeof e}(a)?null!==a&&"object"==typeof a&&(a.current=e):a(e)},value:P&&w?N:o.value});return l?(function(e,t){O.filter((function(n){return null!=t.props[n]&&t.props[n]!==e[n]})).length&&k(!1)}(o,l),n.createElement(j,q,l)):n.createElement("input",q)}));return R.displayName="InputMask",R.defaultProps={alwaysShowMask:!1,formatChars:{},maskPlaceholder:"_"},R}));
